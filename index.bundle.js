/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,h=a?e[t+2]:0,c=r>>2,l=(3&r)<<4|o>>4;let u=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(u=64)),i.push(n[c],n[l],n[u],n[d])}return i.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(t(e),n)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw Error();const h=r<<2|s>>4;if(i.push(h),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},i=function(e){return function(e){const i=t(e);return n.encodeByteArray(i,!0)}(e).replace(/\./g,"")};class r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function o(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function a(){return"object"==typeof indexedDB}function h(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class c extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,c.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(u,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new c(i,o,n)}}const u=/\{\$([^}]+)}/g;function d(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(f(n)&&f(s)){if(!d(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function f(e){return null!==e&&"object"==typeof e}function p(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function g(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function m(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class v{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=y),void 0===i.error&&(i.error=y),void 0===i.complete&&(i.complete=y);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function y(){}function w(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function b(e){return e&&e._delegate?e._delegate:e}class _{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const I="[DEFAULT]";class T{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:I})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===I?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:I:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new T(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const k=[];var S,C;(C=S||(S={}))[C.DEBUG=0]="DEBUG",C[C.VERBOSE=1]="VERBOSE",C[C.INFO=2]="INFO",C[C.WARN=3]="WARN",C[C.ERROR=4]="ERROR",C[C.SILENT=5]="SILENT";const R={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},A=S.INFO,O={[S.DEBUG]:"log",[S.VERBOSE]:"log",[S.INFO]:"info",[S.WARN]:"warn",[S.ERROR]:"error"},P=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=O[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class D{constructor(e){this.name=e,this._logLevel=A,this._logHandler=P,this._userLogHandler=null,k.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in S))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?R[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,S.DEBUG,...e),this._logHandler(this,S.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,S.VERBOSE,...e),this._logHandler(this,S.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,S.INFO,...e),this._logHandler(this,S.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,S.WARN,...e),this._logHandler(this,S.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,S.ERROR,...e),this._logHandler(this,S.ERROR,...e)}}let N,L;const M=new WeakMap,U=new WeakMap,x=new WeakMap,F=new WeakMap,j=new WeakMap;let B={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return U.get(e);if("objectStoreNames"===t)return e.objectStoreNames||x.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function H(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply($(this),e),V(M.get(this))}:function(...e){return V(t.apply($(this),e))}:function(e,...n){const i=t.call($(this),e,...n);return x.set(i,e.sort?e.sort():[e]),V(i)}:(e instanceof IDBTransaction&&function(e){if(U.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));U.set(e,t)}(e),n=e,(N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,B):e);var t,n}function V(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(V(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&M.set(t,e)})).catch((()=>{})),j.set(t,e),t}(e);if(F.has(e))return F.get(e);const t=H(e);return t!==e&&(F.set(e,t),j.set(t,e)),t}const $=e=>j.get(e);function z(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=V(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(V(o.result),e.oldVersion,e.newVersion,V(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const q=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],W=new Map;function G(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(W.get(t))return W.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=K.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!q.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return W.set(t,s),s}var X;X=B,B={...X,get:(e,t,n)=>G(e,t)||X.get(e,t,n),has:(e,t)=>!!G(e,t)||X.has(e,t)};class J{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Y="@firebase/app",Q="0.7.28",Z=new D("@firebase/app"),ee={[Y]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},te=new Map,ne=new Map;function ie(e,t){try{e.container.addComponent(t)}catch(n){Z.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function re(e){const t=e.name;if(ne.has(t))return Z.debug(`There were multiple attempts to register component ${t}.`),!1;ne.set(t,e);for(const t of te.values())ie(t,e);return!0}function se(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const oe=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ae{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oe.create("app-deleted",{appName:this._name})}}const he="9.9.0";function ce(e="[DEFAULT]"){const t=te.get(e);if(!t)throw oe.create("no-app",{appName:e});return t}function le(e,t,n){var i;let r=null!==(i=ee[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Z.warn(e.join(" "))}re(new _(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const ue="firebase-heartbeat-store";let de=null;function fe(){return de||(de=z("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ue)}}).catch((e=>{throw oe.create("storage-open",{originalErrorMessage:e.message})}))),de}async function pe(e,t){var n;try{const n=(await fe()).transaction(ue,"readwrite"),i=n.objectStore(ue);return await i.put(t,ge(e)),n.done}catch(e){throw oe.create("storage-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message})}}function ge(e){return`${e.name}!${e.options.appId}`}class me{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ye(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ve();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ve(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),we(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),we(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=i(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ve(){return(new Date).toISOString().substring(0,10)}class ye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!a()&&h().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await fe()).transaction(ue).objectStore(ue).get(ge(e))}catch(e){throw oe.create("storage-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function we(e){return i(JSON.stringify({version:2,heartbeats:e})).length}re(new _("platform-logger",(e=>new J(e)),"PRIVATE")),re(new _("heartbeat",(e=>new me(e)),"PRIVATE")),le(Y,Q,""),le(Y,Q,"esm2017"),le("fire-js",""),le("firebase","9.9.0","app");const be="@firebase/installations",_e="0.5.12",Ie="w:0.5.12",Te=new l("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(e){return e instanceof c&&e.code.includes("request-failed")}function ke({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Se(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ce(e,t){const n=(await t.json()).error;return Te.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Re({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Ae(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Oe(e){return new Promise((t=>{setTimeout(t,e)}))}const Pe=/^[cdef][\w-]{21}$/;function De(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Pe.test(t)?t:""}catch(e){return""}}function Ne(e){return`${e.appName}!${e.appId}`}const Le=new Map;function Me(e,t){const n=Ne(e);Ue(n,t),function(e,t){const n=(!xe&&"BroadcastChannel"in self&&(xe=new BroadcastChannel("[Firebase] FID Change"),xe.onmessage=e=>{Ue(e.data.key,e.data.fid)}),xe);n&&n.postMessage({key:e,fid:t}),0===Le.size&&xe&&(xe.close(),xe=null)}(n,t)}function Ue(e,t){const n=Le.get(e);if(n)for(const e of n)e(t)}let xe=null;const Fe="firebase-installations-store";let je=null;function Be(){return je||(je=z("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Fe)}})),je}async function He(e,t){const n=Ne(e),i=(await Be()).transaction(Fe,"readwrite"),r=i.objectStore(Fe),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||Me(e,t.fid),t}async function Ve(e){const t=Ne(e),n=(await Be()).transaction(Fe,"readwrite");await n.objectStore(Fe).delete(t),await n.done}async function $e(e,t){const n=Ne(e),i=(await Be()).transaction(Fe,"readwrite"),r=i.objectStore(Fe),s=await r.get(n),o=t(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||Me(e,o.fid),o}async function ze(e){let t;const n=await $e(e.appConfig,(n=>{const i=function(e){return We(e||{fid:De(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Te.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=ke(e),r=Re(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ie},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Ae((()=>fetch(i,a)));if(h.ok){const e=await h.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Se(e.authToken)}}throw await Ce("Create Installation",h)}(e,t);return He(e.appConfig,n)}catch(n){throw Ee(n)&&409===n.customData.serverCode?await Ve(e.appConfig):await He(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:qe(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function qe(e){let t=await Ke(e.appConfig);for(;1===t.registrationStatus;)await Oe(100),t=await Ke(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ze(e);return n||t}return t}function Ke(e){return $e(e,(e=>{if(!e)throw Te.create("installation-not-found");return We(e)}))}function We(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ge({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${ke(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=Re(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={installation:{sdkVersion:Ie,appId:e.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Ae((()=>fetch(i,a)));if(h.ok)return Se(await h.json());throw await Ce("Generate Auth Token",h)}async function Xe(e,t=!1){let n;const i=await $e(e.appConfig,(i=>{if(!Ye(i))throw Te.create("not-registered");const r=i.authToken;if(!t&&(2===(s=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(s)))return i;var s;if(1===r.requestStatus)return n=async function(e,t){let n=await Je(e.appConfig);for(;1===n.authToken.requestStatus;)await Oe(100),n=await Je(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Xe(e,t):i}(e,t),i;{if(!navigator.onLine)throw Te.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Ge(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await He(e.appConfig,i),n}catch(n){if(!Ee(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await He(e.appConfig,n)}else await Ve(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Je(e){return $e(e,(e=>{if(!Ye(e))throw Te.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Ye(e){return void 0!==e&&2===e.registrationStatus}function Qe(e){return Te.create("missing-app-config-values",{valueName:e})}const Ze="installations";re(new _(Ze,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Qe("App Configuration");if(!e.name)throw Qe("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Qe(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:se(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),re(new _("installations-internal",(e=>{const t=se(e.getProvider("app").getImmediate(),Ze).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await ze(t);return i?i.catch(console.error):Xe(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await ze(e);t&&await t}(n),(await Xe(n,t)).token}(t,e)}}),"PRIVATE")),le(be,_e),le(be,_e,"esm2017");const et="analytics",tt="https://www.googletagmanager.com/gtag/js",nt=new D("@firebase/analytics");function it(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const rt=new l("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),st=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ot(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function at(e,t=st,n){const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw rt.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw rt.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ct;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),ht({appId:i,apiKey:r,measurementId:s},o,a,t)}async function ht(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=st){var s,o;const{appId:a,measurementId:h}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(s),i(rt.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(h)return nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null===(s=e)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:h};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:ot(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return r.deleteThrottleMetadata(a),t}catch(t){const s=t;if(!function(e){if(!(e instanceof c&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(s)){if(r.deleteThrottleMetadata(a),h)return nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null==s?void 0:s.message}]`),{appId:a,measurementId:h};throw t}const l=503===Number(null===(o=null==s?void 0:s.customData)||void 0===o?void 0:o.httpStatus)?w(n,r.intervalMillis,30):w(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(a,u),nt.debug(`Calling attemptFetch again in ${l} millis`),ht(e,u,i,r)}}class ct{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let lt,ut;async function dt(e,t,n,i,r,s,o){var c;const l=at(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&nt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>nt.error(e))),t.push(l);const u=async function(){var e;if(!a())return nt.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await h()}catch(t){return nt.warn(rt.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[d,f]=await Promise.all([l,u]);(function(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(tt))return t;return null})()||function(e,t){const n=document.createElement("script");n.src=`${tt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(s,d.measurementId),ut&&(r("consent","default",ut),ut=void 0),r("js",new Date);const p=null!==(c=null==o?void 0:o.config)&&void 0!==c?c:{};return p.origin="firebase",p.update=!0,null!=f&&(p.firebase_id=f),r("config",d.measurementId,p),lt&&(r("set",lt),lt=void 0),d.measurementId}class ft{constructor(e){this.app=e}_delete(){return delete pt[this.app.options.appId],Promise.resolve()}}let pt={},gt=[];const mt={};let vt,yt,wt="dataLayer",bt=!1;function _t(e,t,n){!function(){const e=[];if(o()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:t});nt.warn(n.message)}}();const i=e.options.appId;if(!i)throw rt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rt.create("no-api-key");nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pt[i])throw rt.create("already-exists",{id:i});if(!bt){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let s=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(e,t,n,i){return async function(r,s,o){try{"event"===r?await async function(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await it(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(e){nt.error(e)}}(e,t,n,s,o):"config"===r?await async function(e,t,n,i,r,s){const o=i[r];try{if(o)await t[o];else{const e=(await it(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){nt.error(e)}e("config",r,s)}(e,t,n,i,s,o):"consent"===r?e("consent","update",o):e("set",s)}catch(e){nt.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window.gtag}}(pt,gt,mt);yt=e,vt=t,bt=!0}return pt[i]=dt(e,gt,mt,t,vt,wt,n),new ft(e)}const It="@firebase/analytics",Tt="0.8.0";re(new _(et,((e,{options:t})=>_t(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),re(new _("analytics-internal",(function(e){try{const t=e.getProvider(et).getImmediate();return{logEvent:(e,n,i)=>function(e,t,n,i){e=b(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(yt,pt[e.app.options.appId],t,n,i).catch((e=>nt.error(e)))}(t,e,n,i)}}catch(e){throw rt.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),le(It,Tt),le(It,Tt,"esm2017");var Et,kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},St={},Ct=Ct||{},Rt=kt||self;function At(){}function Ot(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Pt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dt="closure_uid_"+(1e9*Math.random()>>>0),Nt=0;function Lt(e,t,n){return e.call.apply(e.bind,arguments)}function Mt(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ut(e,t,n){return(Ut=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lt:Mt).apply(null,arguments)}function xt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ft(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function jt(){this.s=this.s,this.o=this.o}var Bt={};jt.prototype.s=!1,jt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Dt)&&e[Dt]||(e[Dt]=++Nt)}(this);delete Bt[e]}},jt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ht=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Vt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,r="string"==typeof e?e.split(""):e;for(let s=0;s<i;s++)s in r&&t.call(n,r[s],s,e)};function $t(e){return Array.prototype.concat.apply([],arguments)}function zt(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function qt(e){return/^[\s\xa0]*$/.test(e)}var Kt,Wt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Gt(e,t){return-1!=e.indexOf(t)}function Xt(e,t){return e<t?-1:e>t?1:0}e:{var Jt=Rt.navigator;if(Jt){var Yt=Jt.userAgent;if(Yt){Kt=Yt;break e}}Kt=""}function Qt(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Zt(e){const t={};for(const n in e)t[n]=e[n];return t}var en="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tn(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<en.length;t++)n=en[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function nn(e){return nn[" "](e),e}nn[" "]=At;var rn,sn,on=Gt(Kt,"Opera"),an=Gt(Kt,"Trident")||Gt(Kt,"MSIE"),hn=Gt(Kt,"Edge"),cn=hn||an,ln=Gt(Kt,"Gecko")&&!(Gt(Kt.toLowerCase(),"webkit")&&!Gt(Kt,"Edge"))&&!(Gt(Kt,"Trident")||Gt(Kt,"MSIE"))&&!Gt(Kt,"Edge"),un=Gt(Kt.toLowerCase(),"webkit")&&!Gt(Kt,"Edge");function dn(){var e=Rt.document;return e?e.documentMode:void 0}e:{var fn="",pn=(sn=Kt,ln?/rv:([^\);]+)(\)|;)/.exec(sn):hn?/Edge\/([\d\.]+)/.exec(sn):an?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(sn):un?/WebKit\/(\S+)/.exec(sn):on?/(?:Version)[ \/]?(\S+)/.exec(sn):void 0);if(pn&&(fn=pn?pn[1]:""),an){var gn=dn();if(null!=gn&&gn>parseFloat(fn)){rn=String(gn);break e}}rn=fn}var mn,vn={};function yn(){return e=vn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Wt(String(rn)).split("."),n=Wt("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var r=t[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;e=Xt(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Xt(0==r[2].length,0==s[2].length)||Xt(r[2],s[2]),r=r[3],s=s[3]}while(0==e)}return 0<=e}();var e}Rt.document&&an?mn=dn()||parseInt(rn,10)||void 0:mn=void 0;var wn=mn,bn=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Rt.addEventListener("test",At,t),Rt.removeEventListener("test",At,t)}catch(e){}return e}();function _n(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function In(e,t){if(_n.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ln){e:{try{nn(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Tn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&In.Z.h.call(this)}}_n.prototype.h=function(){this.defaultPrevented=!0},Ft(In,_n);var Tn={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Sn(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=r,this.key=++kn,this.ca=this.fa=!1}function Cn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Rn(e){this.src=e,this.g={},this.h=0}function An(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Ht(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Cn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function On(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==i)return r}return-1}Rn.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=On(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Sn(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var Pn="closure_lm_"+(1e6*Math.random()|0),Dn={};function Nn(e,t,n,i,r){if(i&&i.once)return Mn(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Nn(e,t[s],n,i,r);return null}return n=Vn(n),e&&e[En]?e.N(t,n,Pt(i)?!!i.capture:!!i,r):Ln(e,t,n,!1,i,r)}function Ln(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Pt(r)?!!r.capture:!!r,a=Bn(e);if(a||(e[Pn]=a=new Rn(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){var e=jn;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)bn||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Fn(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Mn(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Mn(e,t[s],n,i,r);return null}return n=Vn(n),e&&e[En]?e.O(t,n,Pt(i)?!!i.capture:!!i,r):Ln(e,t,n,!0,i,r)}function Un(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Un(e,t[s],n,i,r);else i=Pt(i)?!!i.capture:!!i,n=Vn(n),e&&e[En]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=On(s=e.g[t],n,i,r))&&(Cn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Bn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=On(t,n,i,r)),(n=-1<e?t[e]:null)&&xn(n))}function xn(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[En])An(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Fn(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Bn(t))?(An(n,e),0==n.h&&(n.src=null,t[Pn]=null)):Cn(e)}}}function Fn(e){return e in Dn?Dn[e]:Dn[e]="on"+e}function jn(e,t){if(e.ca)e=!0;else{t=new In(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&xn(e),e=n.call(i,t)}return e}function Bn(e){return(e=e[Pn])instanceof Rn?e:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(e){return"function"==typeof e?e:(e[Hn]||(e[Hn]=function(t){return e.handleEvent(t)}),e[Hn])}function $n(){jt.call(this),this.i=new Rn(this),this.P=this,this.I=null}function zn(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new _n(t,e);else if(t instanceof _n)t.target=t.target||e;else{var r=t;tn(t=new _n(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=qn(o,i,!0,t)&&r}if(r=qn(o=t.g=e,i,!0,t)&&r,r=qn(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=qn(o=t.g=n[s],i,!1,t)&&r}function qn(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,h=o.ia||o.src;o.fa&&An(e.i,o),r=!1!==a.call(h,i)&&r}}return r&&!i.defaultPrevented}Ft($n,jt),$n.prototype[En]=!0,$n.prototype.removeEventListener=function(e,t,n,i){Un(this,e,t,n,i)},$n.prototype.M=function(){if($n.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Cn(n[i]);delete t.g[e],t.h--}}this.I=null},$n.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},$n.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Kn=Rt.JSON.stringify;function Wn(){var e=ei;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Gn,Xn=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Jn),(e=>e.reset()));class Jn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yn(e){Rt.setTimeout((()=>{throw e}),0)}function Qn(e,t){Gn||function(){var e=Rt.Promise.resolve(void 0);Gn=function(){e.then(ti)}}(),Zn||(Gn(),Zn=!0),ei.add(e,t)}var Zn=!1,ei=new class{constructor(){this.h=this.g=null}add(e,t){const n=Xn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ti(){for(var e;e=Wn();){try{e.h.call(e.g)}catch(e){Yn(e)}var t=Xn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Zn=!1}function ni(e,t){$n.call(this),this.h=e||1,this.g=t||Rt,this.j=Ut(this.kb,this),this.l=Date.now()}function ii(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ri(e,t,n){if("function"==typeof e)n&&(e=Ut(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ut(e.handleEvent,e)}return 2147483647<Number(t)?-1:Rt.setTimeout(e,t||0)}function si(e){e.g=ri((()=>{e.g=null,e.i&&(e.i=!1,si(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ft(ni,$n),(Et=ni.prototype).da=!1,Et.S=null,Et.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zn(this,"tick"),this.da&&(ii(this),this.start()))}},Et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){ni.Z.M.call(this),ii(this),delete this.g};class oi extends jt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:si(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(e){jt.call(this),this.h=e,this.g={}}Ft(ai,jt);var hi=[];function ci(e,t,n,i){Array.isArray(n)||(n&&(hi[0]=n.toString()),n=hi);for(var r=0;r<n.length;r++){var s=Nn(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function li(e){Qt(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xn(e)}),e),e.g={}}function ui(){this.g=!0}function di(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Kn(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}ai.prototype.M=function(){ai.Z.M.call(this),li(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ui.prototype.Aa=function(){this.g=!1},ui.prototype.info=function(){};var fi={},pi=null;function gi(){return pi=pi||new $n}function mi(e){_n.call(this,fi.Ma,e)}function vi(e){const t=gi();zn(t,new mi(t,e))}function yi(e,t){_n.call(this,fi.STAT_EVENT,e),this.stat=t}function wi(e){const t=gi();zn(t,new yi(t,e))}function bi(e,t){_n.call(this,fi.Na,e),this.size=t}function _i(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Rt.setTimeout((function(){e()}),t)}fi.Ma="serverreachability",Ft(mi,_n),fi.STAT_EVENT="statevent",Ft(yi,_n),fi.Na="timingevent",Ft(bi,_n);var Ii={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ti={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ei(){}function ki(e){return e.h||(e.h=e.i())}function Si(){}Ei.prototype.h=null;var Ci,Ri={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ai(){_n.call(this,"d")}function Oi(){_n.call(this,"c")}function Pi(){}function Di(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new ai(this),this.P=Li,e=cn?125:void 0,this.W=new ni(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}Ft(Ai,_n),Ft(Oi,_n),Ft(Pi,Ei),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},Ci=new Pi;var Li=45e3,Mi={},Ui={};function xi(e,t,n){e.K=1,e.v=or(er(t)),e.s=n,e.U=!0,Fi(e,null)}function Fi(e,t){e.F=Date.now(),Vi(e),e.A=er(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),wr(n.h,"t",i),e.C=0,n=e.l.H,e.h=new Ni,e.g=ws(e.l,n?t:null,!e.s),0<e.O&&(e.L=new oi(Ut(e.Ia,e,e.g),e.O)),ci(e.V,e.g,"readystatechange",e.gb),t=e.H?Zt(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),vi(1),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var l=c[0];c=c[1];var u=l.split("_");o=2<=u.length&&"type"==u[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ji(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Bi(e,t,n){let i,r=!0;for(;!e.I&&e.C<n.length;){if(i=Hi(e,n),i==Ui){4==t&&(e.o=4,wi(14),r=!1),di(e.j,e.m,null,"[Incomplete Response]");break}if(i==Mi){e.o=4,wi(15),di(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}di(e.j,e.m,i,null),Wi(e,i)}ji(e)&&i!=Ui&&i!=Mi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wi(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),us(t),t.L=!0,wi(11))):(di(e.j,e.m,n,"[Invalid Chunked Response]"),Ki(e),qi(e))}function Hi(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Ui:(n=Number(t.substring(n,i)),isNaN(n)?Mi:(i+=1)+n>t.length?Ui:(t=t.substr(i,n),e.C=i+n,t))}function Vi(e){e.Y=Date.now()+e.P,$i(e,e.P)}function $i(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_i(Ut(e.eb,e),t)}function zi(e){e.B&&(Rt.clearTimeout(e.B),e.B=null)}function qi(e){0==e.l.G||e.I||ps(e.l,e)}function Ki(e){zi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ii(e.W),li(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Wi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||kr(n.i,e)))if(n.I=e.N,!e.J&&kr(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fs(n),ns(n)}ls(n),wi(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=_i(Ut(n.ab,n),6e3));if(1>=Er(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else ms(n,11)}else if((e.J||n.g==e)&&fs(n),!qt(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const r=c[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(i=1.5*l,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;!s.g&&(Gt(e,"spdy")||Gt(e,"quic")||Gt(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Sr(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,sr(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=ys(i,i.H?i.la:null,i.W),o.J){Cr(i.i,o);var a=o,h=i.K;h&&a.setTimeout(h),a.B&&(zi(a),Vi(a)),i.g=o}else cs(i);0<n.l.length&&ss(n)}else"stop"!=c[0]&&"close"!=c[0]||ms(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ms(n,7):ts(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}vi(4)}catch(e){}}function Gi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ot(e)||"string"==typeof e)Vt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ot(e)||"string"==typeof e){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ot(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}}function Xi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Xi)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Ji(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];Yi(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)Yi(r,i=e.g[t])||(e.g[n++]=i,r[i]=1),t++;e.g.length=n}}function Yi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Et=Di.prototype).setTimeout=function(e){this.P=e},Et.gb=function(e){e=e.target;const t=this.L;t&&3==Jr(e)?t.l():this.Ia(e)},Et.Ia=function(e){try{if(e==this.g)e:{const l=Jr(this.g);var t=this.g.Da();const u=this.g.ba();if(!(3>l)&&(3!=l||cn||this.g&&(this.h.h||this.g.ga()||Yr(this.g)))){this.I||4!=l||7==t||vi(8==t||0>=u?3:2),zi(this);var n=this.g.ba();this.N=n;t:if(ji(this)){var i=Yr(this.g);e="";var r=i.length,s=4==Jr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ki(this),qi(this);var o="";break t}this.h.i=new Rt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qt(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,wi(12),Ki(this),qi(this);break e}di(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wi(this,n)}this.U?(Bi(this,l,o),cn&&this.i&&3==l&&(ci(this.V,this.W,"tick",this.fb),this.W.start())):(di(this.j,this.m,o,null),Wi(this,o)),4==l&&Ki(this),this.i&&!this.I&&(4==l?ps(this.l,this):(this.i=!1,Vi(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Ki(this),qi(this)}}}catch(e){}},Et.fb=function(){if(this.g){var e=Jr(this.g),t=this.g.ga();this.C<t.length&&(zi(this),Bi(this,e,t),this.i&&4!=e&&Vi(this))}},Et.cancel=function(){this.I=!0,Ki(this)},Et.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(vi(3),wi(17)),Ki(this),this.o=2,qi(this)):$i(this,this.Y-e)},(Et=Xi.prototype).R=function(){Ji(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Et.T=function(){return Ji(this),this.g.concat()},Et.get=function(e,t){return Yi(this.h,e)?this.h[e]:t},Et.set=function(e,t){Yi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Et.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);e.call(t,s,r,this)}};var Qi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zi(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Zi){this.g=void 0!==t?t:e.g,tr(this,e.j),this.s=e.s,nr(this,e.i),ir(this,e.m),this.l=e.l,t=e.h;var n=new gr;n.i=t.i,t.g&&(n.g=new Xi(t.g),n.h=t.h),rr(this,n),this.o=e.o}else e&&(n=String(e).match(Qi))?(this.g=!!t,tr(this,n[1]||"",!0),this.s=ar(n[2]||""),nr(this,n[3]||"",!0),ir(this,n[4]),this.l=ar(n[5]||"",!0),rr(this,n[6]||"",!0),this.o=ar(n[7]||"")):(this.g=!!t,this.h=new gr(null,this.g))}function er(e){return new Zi(e)}function tr(e,t,n){e.j=n?ar(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nr(e,t,n){e.i=n?ar(t,!0):t}function ir(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function rr(e,t,n){t instanceof gr?(e.h=t,function(e,t){t&&!e.j&&(mr(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vr(this,t),wr(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=hr(t,fr)),e.h=new gr(t,e.g))}function sr(e,t,n){e.h.set(t,n)}function or(e){return sr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ar(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,cr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Zi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hr(t,lr,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(hr(t,lr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(hr(n,"/"==n.charAt(0)?dr:ur,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",hr(n,pr)),e.join("")};var lr=/[#\/\?@]/g,ur=/[#\?:]/g,dr=/[#\?]/g,fr=/[#\?@]/g,pr=/#/g;function gr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mr(e){e.g||(e.g=new Xi,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vr(e,t){mr(e),t=br(e,t),Yi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Yi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ji(e)))}function yr(e,t){return mr(e),t=br(e,t),Yi(e.g.h,t)}function wr(e,t,n){vr(e,t),0<n.length&&(e.i=null,e.g.set(br(e,t),zt(n)),e.h+=n.length)}function br(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _r(e){this.l=e||Ir,e=Rt.PerformanceNavigationTiming?0<(e=Rt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=gr.prototype).add=function(e,t){mr(this),this.i=null,e=br(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Et.forEach=function(e,t){mr(this),this.g.forEach((function(n,i){Vt(n,(function(n){e.call(t,n,i,this)}),this)}),this)},Et.T=function(){mr(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var r=e[i],s=0;s<r.length;s++)n.push(t[i]);return n},Et.R=function(e){mr(this);var t=[];if("string"==typeof e)yr(this,e)&&(t=$t(t,this.g.get(br(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=$t(t,e[n])}return t},Et.set=function(e,t){return mr(this),this.i=null,yr(this,e=br(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Et.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),e.push(o)}}return this.i=e.join("&")};var Ir=10;function Tr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Er(e){return e.h?1:e.g?e.g.size:0}function kr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sr(e,t){e.g?e.g.add(t):e.h=t}function Cr(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rr(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return zt(e.i)}function Ar(){}function Or(){this.g=new Ar}function Pr(e,t,n){const i=n||"";try{Gi(e,(function(e,n){let r=e;Pt(e)&&(r=Kn(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Dr(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function Nr(e){this.l=e.$b||null,this.j=e.ib||!1}function Lr(e,t){$n.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Mr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_r.prototype.cancel=function(){if(this.i=Rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ar.prototype.stringify=function(e){return Rt.JSON.stringify(e,void 0)},Ar.prototype.parse=function(e){return Rt.JSON.parse(e,void 0)},Ft(Nr,Ei),Nr.prototype.g=function(){return new Lr(this.l,this.j)},Nr.prototype.i=function(e){return function(){return e}}({}),Ft(Lr,$n);var Mr=0;function Ur(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xr(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fr(e)}function Fr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Et=Lr.prototype).open=function(e,t){if(this.readyState!=Mr)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fr(this)},Et.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Rt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xr(this)),this.readyState=Mr},Et.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ur(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Et.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xr(this):Fr(this),3==this.readyState&&Ur(this)}},Et.Ua=function(e){this.g&&(this.response=this.responseText=e,xr(this))},Et.Ta=function(e){this.g&&(this.response=e,xr(this))},Et.ha=function(){this.g&&xr(this)},Et.setRequestHeader=function(e,t){this.v.append(e,t)},Et.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jr=Rt.JSON.parse;function Br(e){$n.call(this),this.headers=new Xi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hr,this.K=this.L=!1}Ft(Br,$n);var Hr="",Vr=/^https?$/i,$r=["POST","PUT"];function zr(e){return"content-type"==e.toLowerCase()}function qr(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Kr(e),Gr(e)}function Kr(e){e.D||(e.D=!0,zn(e,"complete"),zn(e,"error"))}function Wr(e){if(e.h&&void 0!==Ct&&(!e.C[1]||4!=Jr(e)||2!=e.ba()))if(e.v&&4==Jr(e))ri(e.Fa,0,e);else if(zn(e,"readystatechange"),4==Jr(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.H).match(Qi)[1]||null;if(!r&&Rt.self&&Rt.self.location){var s=Rt.self.location.protocol;r=s.substr(0,s.length-1)}i=!Vr.test(r?r.toLowerCase():"")}n=i}if(n)zn(e,"complete"),zn(e,"success");else{e.m=6;try{var o=2<Jr(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",Kr(e)}}finally{Gr(e)}}}function Gr(e,t){if(e.g){Xr(e);const n=e.g,i=e.C[0]?At:null;e.g=null,e.C=null,t||zn(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function Xr(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Rt.clearTimeout(e.A),e.A=null)}function Jr(e){return e.g?e.g.readyState:0}function Yr(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Hr:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qr(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return Qt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):sr(e,t,n))}function Zr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function es(e){this.za=0,this.l=[],this.h=new ui,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zr("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zr("baseRetryDelayMs",5e3,e),this.$a=Zr("retryDelaySeedMs",1e4,e),this.Ya=Zr("forwardChannelMaxRetries",2,e),this.ra=Zr("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new _r(e&&e.concurrentRequestLimit),this.Ca=new Or,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ts(e){if(is(e),3==e.G){var t=e.V++,n=er(e.F);sr(n,"SID",e.J),sr(n,"RID",t),sr(n,"TYPE","terminate"),as(e,n),(t=new Di(e,e.h,t,void 0)).K=2,t.v=or(er(n)),n=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(n=Rt.navigator.sendBeacon(t.v.toString(),"")),!n&&Rt.Image&&((new Image).src=t.v,n=!0),n||(t.g=ws(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vi(t)}vs(e)}function ns(e){e.g&&(us(e),e.g.cancel(),e.g=null)}function is(e){ns(e),e.u&&(Rt.clearTimeout(e.u),e.u=null),fs(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Rt.clearTimeout(e.m),e.m=null)}function rs(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&ss(e)}function ss(e){Tr(e.i)||e.m||(e.m=!0,Qn(e.Ha,e),e.C=0)}function os(e,t){var n;n=t?t.m:e.V++;const i=er(e.F);sr(i,"SID",e.J),sr(i,"RID",n),sr(i,"AID",e.U),as(e,i),e.o&&e.s&&Qr(i,e.o,e.s),n=new Di(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=hs(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Sr(e.i,n),xi(n,i,t)}function as(e,t){e.j&&Gi({},(function(e,n){sr(t,n,e)}))}function hs(e,t,n){n=Math.min(e.l.length,n);var i=e.j?Ut(e.j.Oa,e.j,e):null;e:{var r=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=t,0>n)t=Math.max(0,r[o].h-100),s=!1;else try{Pr(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function cs(e){e.g||e.u||(e.Y=1,Qn(e.Ga,e),e.A=0)}function ls(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=_i(Ut(e.Ga,e),gs(e,e.A)),e.A++,0))}function us(e){null!=e.B&&(Rt.clearTimeout(e.B),e.B=null)}function ds(e){e.g=new Di(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=er(e.oa);sr(t,"RID","rpc"),sr(t,"SID",e.J),sr(t,"CI",e.N?"0":"1"),sr(t,"AID",e.U),as(e,t),sr(t,"TYPE","xmlhttp"),e.o&&e.s&&Qr(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=or(er(t)),n.s=null,n.U=!0,Fi(n,e)}function fs(e){null!=e.v&&(Rt.clearTimeout(e.v),e.v=null)}function ps(e,t){var n=null;if(e.g==t){fs(e),us(e),e.g=null;var i=2}else{if(!kr(e.i,t))return;n=t.D,Cr(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;zn(i=gi(),new bi(i,n,t,r)),ss(e)}else cs(e);else if(3==(r=t.o)||0==r&&0<e.I||!(1==i&&function(e,t){return!(Er(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=_i(Ut(e.Ha,e,t),gs(e,e.C)),e.C++,0)))}(e,t)||2==i&&ls(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:ms(e,5);break;case 4:ms(e,10);break;case 3:ms(e,6);break;default:ms(e,2)}}function gs(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ms(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=Ut(e.jb,e);n||(n=new Zi("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||tr(n,"https"),or(n)),function(e,t){const n=new ui;if(Rt.Image){const i=new Image;i.onload=xt(Dr,n,i,"TestLoadImage: loaded",!0,t),i.onerror=xt(Dr,n,i,"TestLoadImage: error",!1,t),i.onabort=xt(Dr,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=xt(Dr,n,i,"TestLoadImage: timeout",!1,t),Rt.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else wi(2);e.G=0,e.j&&e.j.va(t),vs(e),is(e)}function vs(e){e.G=0,e.I=-1,e.j&&(0==Rr(e.i).length&&0==e.l.length||(e.i.i.length=0,zt(e.l),e.l.length=0),e.j.ua())}function ys(e,t,n){let i=function(e){return e instanceof Zi?er(e):new Zi(e,void 0)}(n);if(""!=i.i)t&&nr(i,t+"."+i.i),ir(i,i.m);else{const e=Rt.location;i=function(e,t,n,i){var r=new Zi(null,void 0);return e&&tr(r,e),t&&nr(r,t),n&&ir(r,n),i&&(r.l=i),r}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&Qt(e.aa,(function(e,t){sr(i,t,e)})),t=e.D,n=e.sa,t&&n&&sr(i,t,n),sr(i,"VER",e.ma),as(e,i),i}function ws(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Br(new Nr({ib:!0})):new Br(e.qa)).L=e.H,t}function bs(){}function _s(){if(an&&!(10<=Number(wn)))throw Error("Environmental error: no available transport.")}function Is(e,t){$n.call(this),this.g=new es(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!qt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!qt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ks(this)}function Ts(e){Ai.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Es(){Oi.call(this),this.status=1}function ks(e){this.g=e}(Et=Br.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ci.g(),this.C=this.u?ki(this.u):ki(Ci),this.g.onreadystatechange=Ut(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void qr(this,e)}e=n||"";const r=new Xi(this.headers);i&&Gi(i,(function(e,t){r.set(t,e)})),i=function(e){e:{var t=zr;const n=e.length,i="string"==typeof e?e.split(""):e;for(let r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(r.T()),n=Rt.FormData&&e instanceof Rt.FormData,!(0<=Ht($r,t))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xr(this),0<this.B&&((this.K=function(e){return an&&yn()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ut(this.pa,this)):this.A=ri(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){qr(this,e)}},Et.pa=function(){void 0!==Ct&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zn(this,"timeout"),this.abort(8))},Et.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zn(this,"complete"),zn(this,"abort"),Gr(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gr(this,!0)),Br.Z.M.call(this)},Et.Fa=function(){this.s||(this.F||this.v||this.l?Wr(this):this.cb())},Et.cb=function(){Wr(this)},Et.ba=function(){try{return 2<Jr(this)?this.g.status:-1}catch(e){return-1}},Et.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Et.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jr(t)}},Et.Da=function(){return this.m},Et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=es.prototype).ma=8,Et.G=1,Et.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Et.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Di(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=Zt(s),tn(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hs(this,r,t),sr(n=er(this.F),"RID",e),sr(n,"CVER",22),this.D&&sr(n,"X-HTTP-Session-Id",this.D),as(this,n),this.o&&s&&Qr(n,this.o,s),Sr(this.i,r),this.Ra&&sr(n,"TYPE","init"),this.ja?(sr(n,"$req",t),sr(n,"SID","null"),r.$=!0,xi(r,n,null)):xi(r,n,t),this.G=2}}else 3==this.G&&(e?os(this,e):0==this.l.length||Tr(this.i)||os(this))},Et.Ga=function(){if(this.u=null,ds(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=_i(Ut(this.bb,this),e)}},Et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wi(10),ns(this),ds(this))},Et.ab=function(){null!=this.v&&(this.v=null,ns(this),ls(this),wi(19))},Et.jb=function(e){e?(this.h.info("Successfully pinged google.com"),wi(2)):(this.h.info("Failed to ping google.com"),wi(1))},(Et=bs.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Oa=function(){},_s.prototype.g=function(e,t){return new Is(e,t)},Ft(Is,$n),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Qn(Ut(e.hb,e,t))),wi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ys(e,null,e.W),ss(e)},Is.prototype.close=function(){ts(this.g)},Is.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,rs(this.g,t)}else this.v?((t={}).__data__=Kn(e),rs(this.g,t)):rs(this.g,e)},Is.prototype.M=function(){this.g.j=null,delete this.j,ts(this.g),delete this.g,Is.Z.M.call(this)},Ft(Ts,Ai),Ft(Es,Oi),Ft(ks,bs),ks.prototype.xa=function(){zn(this.g,"a")},ks.prototype.wa=function(e){zn(this.g,new Ts(e))},ks.prototype.va=function(e){zn(this.g,new Es(e))},ks.prototype.ua=function(){zn(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Ti.COMPLETE="complete",Si.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",$n.prototype.listen=$n.prototype.N,Br.prototype.listenOnce=Br.prototype.O,Br.prototype.getLastError=Br.prototype.La,Br.prototype.getLastErrorCode=Br.prototype.Da,Br.prototype.getStatus=Br.prototype.ba,Br.prototype.getResponseJson=Br.prototype.Qa,Br.prototype.getResponseText=Br.prototype.ga,Br.prototype.send=Br.prototype.ea,St.createWebChannelTransport=function(){return new _s},St.getStatEventTarget=function(){return gi()},St.ErrorCode=Ii,St.EventType=Ti,St.Event=fi,St.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},St.FetchXmlHttpFactory=Nr,St.WebChannel=Si,St.XhrIo=Br;const Ss="@firebase/firestore";class Cs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cs.UNAUTHENTICATED=new Cs(null),Cs.GOOGLE_CREDENTIALS=new Cs("google-credentials-uid"),Cs.FIRST_PARTY=new Cs("first-party-uid"),Cs.MOCK_USER=new Cs("mock-user");let Rs="9.9.0";const As=new D("@firebase/firestore");function Os(e,...t){if(As.logLevel<=S.DEBUG){const n=t.map(Ds);As.debug(`Firestore (${Rs}): ${e}`,...n)}}function Ps(e,...t){if(As.logLevel<=S.ERROR){const n=t.map(Ds);As.error(`Firestore (${Rs}): ${e}`,...n)}}function Ds(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ns(e="Unexpected state"){const t=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+e;throw Ps(t),new Error(t)}function Ls(e,t){e||Ns()}const Ms="cancelled",Us="invalid-argument",xs="failed-precondition",Fs="unavailable";class js extends c{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Hs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cs.UNAUTHENTICATED)))}shutdown(){}}class $s{constructor(e){this.t=e,this.currentUser=Cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Bs,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Os("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Os("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Bs)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Os("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ls("string"==typeof t.accessToken),new Hs(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ls(null===e||"string"==typeof e),new Cs(e)}}class zs{constructor(e,t,n){this.type="FirstParty",this.user=Cs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class qs{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new zs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Cs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ks{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ws{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&Os("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,Os("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Os("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):Os("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ls("string"==typeof e.token),this.p=e.token,new Ks(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}function Xs(e,t){return e<t?-1:e>t?1:0}class Js{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ns(),void 0===n?n=e.length-t:n>e.length-t&&Ns(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Js.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ys extends Js{construct(e,t,n){return new Ys(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new js(Us,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Ys(t)}static emptyPath(){return new Ys([])}}class Qs{constructor(e){this.path=e}static fromPath(e){return new Qs(Ys.fromString(e))}static fromName(e){return new Qs(Ys.fromString(e).popFirst(5))}static empty(){return new Qs(Ys.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ys.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ys.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qs(new Ys(e.slice()))}}function Zs(e){return"IndexedDbTransactionError"===e.name}class eo{constructor(e,t){this.comparator=e,this.root=t||no.EMPTY}insert(e,t){return new eo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,no.BLACK,null,null))}remove(e){return new eo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,no.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new to(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new to(this.root,e,this.comparator,!1)}getReverseIterator(){return new to(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new to(this.root,e,this.comparator,!0)}}class to{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class no{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:no.RED,this.left=null!=i?i:no.EMPTY,this.right=null!=r?r:no.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new no(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return no.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return no.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,no.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,no.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ns();if(this.right.isRed())throw Ns();const e=this.left.check();if(e!==this.right.check())throw Ns();return e+(this.isRed()?0:1)}}no.EMPTY=null,no.RED=!0,no.BLACK=!1,no.EMPTY=new class{constructor(){this.size=0}get key(){throw Ns()}get value(){throw Ns()}get color(){throw Ns()}get left(){throw Ns()}get right(){throw Ns()}copy(e,t,n,i,r){return this}insert(e,t,n){return new no(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class io{constructor(e){this.comparator=e,this.data=new eo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ro(this.data.getIterator())}getIteratorFrom(e){return new ro(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof io))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new io(this.comparator);return t.data=e,t}}class ro{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class so{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new so(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new so(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function oo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}so.EMPTY_BYTE_STRING=new so("");class ao{constructor(e,t,n,i,r,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class ho{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ho&&e.projectId===this.projectId&&e.database===this.database}}var co,lo;(lo=co||(co={}))[lo.OK=0]="OK",lo[lo.CANCELLED=1]="CANCELLED",lo[lo.UNKNOWN=2]="UNKNOWN",lo[lo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lo[lo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lo[lo.NOT_FOUND=5]="NOT_FOUND",lo[lo.ALREADY_EXISTS=6]="ALREADY_EXISTS",lo[lo.PERMISSION_DENIED=7]="PERMISSION_DENIED",lo[lo.UNAUTHENTICATED=16]="UNAUTHENTICATED",lo[lo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lo[lo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lo[lo.ABORTED=10]="ABORTED",lo[lo.OUT_OF_RANGE=11]="OUT_OF_RANGE",lo[lo.UNIMPLEMENTED=12]="UNIMPLEMENTED",lo[lo.INTERNAL=13]="INTERNAL",lo[lo.UNAVAILABLE=14]="UNAVAILABLE",lo[lo.DATA_LOSS=15]="DATA_LOSS",new eo(Qs.comparator),new eo(Qs.comparator),new eo(Qs.comparator),new io(Qs.comparator),new io(Xs);class uo{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(oo(e.integerValue));else if("doubleValue"in e){const n=oo(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),function(e){return 0===e&&1/e==-1/0}(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ce(t,20),"string"==typeof n?t.he(n):(t.he(`${n.seconds||""}`),t.ae(n.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(function(e){return"string"==typeof e?so.fromBase64String(e):so.fromUint8Array(e)}(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ce(t,45),t.ae(n.latitude||0),t.ae(n.longitude||0)}else"mapValue"in e?function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Ns()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const n=e.fields||{};this.ce(t,55);for(const e of Object.keys(n))this.le(e,t),this.oe(n[e],t)}me(e,t){const n=e.values||[];this.ce(t,50);for(const e of n)this.oe(e,t)}_e(e,t){this.ce(t,37),Qs.fromName(e).path.forEach((e=>{this.ce(t,60),this.ge(e,t)}))}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}uo.ye=new uo,new Uint8Array(0);class fo{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new fo(e,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function po(){return"undefined"!=typeof document?document:null}fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(41943040,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);class go{constructor(e,t,n=1e3,i=1.5,r=6e4){this.js=e,this.timerId=t,this.lo=n,this.fo=i,this._o=r,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-n);i>0&&Os("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(()=>(this.yo=Date.now(),e()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class mo{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new mo(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new js(Ms,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class vo{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Cs.UNAUTHENTICATED,this.clientId=class{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Gs(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Os("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Os("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new js(xs,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=function(e,t){if(Ps("AsyncQueue",`${t}: ${e}`),Zs(e))return new js(Fs,`${t}: ${e}`);throw e}(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}const yo=new Map;class wo{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new js(Us,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new js(Us,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new js(Us,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bo{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new go(this,"async_queue_retry"),this.Kc=()=>{const e=po();e&&Os("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=po();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=po();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise((()=>{}));const t=new Bs;return this.Qc((()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Mc.push(e),this.jc())))}async jc(){if(0!==this.Mc.length){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!Zs(e))throw e;Os("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io((()=>this.jc()))}}Qc(e){const t=this.Oc.then((()=>(this.Lc=!0,e().catch((e=>{this.Bc=e,this.Lc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ps("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Lc=!1,e))))));return this.Oc=t,t}enqueueAfterDelay(e,t,n){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=mo.createAndSchedule(this,e,t,n,(e=>this.Wc(e)));return this.$c.push(i),i}Gc(){this.Bc&&Ns()}verifyOperationInProgress(){}async zc(){let e;do{e=this.Oc,await e}while(e!==this.Oc)}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then((()=>{this.$c.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()}))}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}class _o extends class{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wo({}),this._settingsFrozen=!1,e instanceof ho?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new js(Us,'"projectId" not provided in firebase.initializeApp.');return new ho(e.options.projectId)}(e))}get app(){if(!this._app)throw new js(xs,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new js(xs,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wo(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vs;switch(e.type){case"gapi":const t=e.client;return Ls(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new qs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new js(Us,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yo.get(e);t&&(Os("ComponentProvider","Removing Datastore"),yo.delete(e),t.terminate())}(this),Promise.resolve()}}{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new bo,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||function(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new ao(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new vo(e._authCredentials,e._appCheckCredentials,e._queue,i)}(this),this._firestoreClient.terminate()}}function Io(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}!function(e,t=!0){Rs="9.9.0",re(new _("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=new _o(i,new $s(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),r._setSettings(n),r}),"PUBLIC")),le(Ss,"3.4.12",e),le(Ss,"3.4.12","esm2017")}(),Object.create,Object.create;const To=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Eo=new l("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ko=new D("@firebase/auth");function So(e,...t){ko.logLevel<=S.ERROR&&ko.error(`Auth (9.9.0): ${e}`,...t)}function Co(e,...t){throw Ao(e,...t)}function Ro(e,...t){return Ao(e,...t)}function Ao(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Eo.create(e,...t)}function Oo(e,t,...n){if(!e)throw Ao(t,...n)}function Po(e){const t="INTERNAL ASSERTION FAILED: "+e;throw So(t),new Error(t)}function Do(e,t){e||Po(t)}const No=new Map;function Lo(e){Do(e instanceof Function,"Expected a class definition");let t=No.get(e);return t?(Do(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,No.set(e,t),t)}function Mo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Uo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class xo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Do(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(s())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Uo()||"https:"===Uo()||o()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Fo(e,t){Do(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class jo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ho=new xo(3e4,6e4);function Vo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $o(e,t,n,i,r={}){return zo(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=p(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),jo.fetch()(Ko(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function zo(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Bo),t);try{const t=new Wo(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Go(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Go(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Go(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Go(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},To()),{[t]:n});return new l("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);Co(e,a)}}catch(t){if(t instanceof c)throw t;Co(e,"network-request-failed")}}async function qo(e,t,n,i,r={}){const s=await $o(e,t,n,i,r);return"mfaPendingCredential"in s&&Co(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ko(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Fo(e.config,r):`${e.config.apiScheme}://${r}`}class Wo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ro(this.auth,"network-request-failed"))),Ho.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Go(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ro(e,t,i);return r.customData._tokenResponse=n,r}function Xo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Jo(e){return 1e3*Number(e)}function Yo(e){var t;const[i,r,s]=e.split(".");if(void 0===i||void 0===r||void 0===s)return So("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return n.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(r);return e?JSON.parse(e):(So("Failed to decode base64 JWT payload"),null)}catch(e){return So("Caught error parsing JWT payload as JSON",null===(t=e)||void 0===t?void 0:t.toString()),null}}async function Qo(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof c&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Zo{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===(e=t)||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ea{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ta(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Qo(e,async function(e,t){return $o(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Oo(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Io(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(h=e.providerData,c=o,[...h.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var h,c;const l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ea(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oo(e.idToken,"internal-error"),Oo(void 0!==e.idToken,"internal-error"),Oo(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Yo(e);return Oo(t,"internal-error"),Oo(void 0!==t.exp,"internal-error"),Oo(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Oo(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await zo(e,{},(async()=>{const n=p({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Ko(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",jo.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new na;return n&&(Oo("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Oo("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Oo("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new na,this.toJSON())}_performRefresh(){return Po("not implemented")}}function ia(e,t){Oo("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ra{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Io(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ea(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Oo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=b(e),i=await n.getIdToken(t),r=Yo(i);Oo(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Xo(Jo(r.auth_time)),issuedAtTime:Xo(Jo(r.iat)),expirationTime:Xo(Jo(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=b(e);await ta(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Oo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ra(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Oo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ta(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qo(this,async function(e,t){return $o(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,h,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(h=t.createdAt)&&void 0!==h?h:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Oo(y&&I,e,"internal-error");const T=na.fromJSON(this.name,I);Oo("string"==typeof y,e,"internal-error"),ia(l,e.name),ia(u,e.name),Oo("boolean"==typeof w,e,"internal-error"),Oo("boolean"==typeof b,e,"internal-error"),ia(d,e.name),ia(f,e.name),ia(p,e.name),ia(g,e.name),ia(m,e.name),ia(v,e.name);const E=new ra({uid:y,auth:e,email:u,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t,n=!1){const i=new na;i.updateFromServerResponse(t);const r=new ra({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ta(r),r}}class sa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sa.type="NONE";const oa=sa;function aa(e,t,n){return`firebase:${e}:${t}:${n}`}class ha{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=aa(this.userKey,i.apiKey,r),this.fullPersistenceKey=aa("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ra._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ha(Lo(oa),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Lo(oa);const s=aa(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=ra._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new ha(r,e,n)):new ha(r,e,n)}}function ca(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fa(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(la(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ga(t))return"Blackberry";if(ma(t))return"Webos";if(ua(t))return"Safari";if((t.includes("chrome/")||da(t))&&!t.includes("edge/"))return"Chrome";if(pa(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function la(e=s()){return/firefox\//i.test(e)}function ua(e=s()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function da(e=s()){return/crios\//i.test(e)}function fa(e=s()){return/iemobile/i.test(e)}function pa(e=s()){return/android/i.test(e)}function ga(e=s()){return/blackberry/i.test(e)}function ma(e=s()){return/webos/i.test(e)}function va(e=s()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ya(e=s()){return va(e)||pa(e)||ma(e)||ga(e)||/windows phone/i.test(e)||fa(e)}function wa(e,t=[]){let n;switch(e){case"Browser":n=ca(s());break;case"Worker":n=`${ca(s())}-${e}`;break;default:n=e}return`${n}/JsCore/9.9.0/${t.length?t.join(","):"FirebaseCore-web"}`}class ba{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const n=[];try{for(const t of this.queue)await t(e),t.onAbort&&n.push(t.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(t=e)||void 0===t?void 0:t.message})}}}class _a{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ta(this),this.idTokenSubscription=new Ta(this),this.beforeStateQueue=new ba(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eo,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lo(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await ta(e)}catch(e){if("auth/network-request-failed"!==(null===(t=e)||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?b(e):null;return t&&Oo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Lo(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new l("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lo(e)||this._popupRedirectResolver;Oo(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[Lo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Oo(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Ia(e){return b(e)}class Ta{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new v(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Oo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Ea{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Po("not implemented")}_getIdTokenResponse(e){return Po("not implemented")}_linkToIdToken(e,t){return Po("not implemented")}_getReauthenticationResolver(e){return Po("not implemented")}}class ka extends Ea{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ka(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ka(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return qo(e,"POST","/v1/accounts:signInWithPassword",Vo(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return qo(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}(e,{email:this._email,oobCode:this._password});default:Co(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return $o(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return qo(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Co(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Sa(e,t){return qo(e,"POST","/v1/accounts:signInWithIdp",Vo(e,t))}class Ca extends Ea{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Co("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Io(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ca(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return Sa(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Sa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sa(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=p(t)}return e}}const Ra={USER_NOT_FOUND:"user-not-found"};class Aa extends Ea{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Aa({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Aa({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,t));if(n.temporaryProof)throw Go(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ra)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Aa({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Oa{constructor(e){var t,n,i,r,s,o;const a=g(m(e)),h=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Oo(h&&c&&l,"argument-error"),this.apiKey=h,this.operation=l,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=g(m(e)).link,n=t?g(m(t)).deep_link_id:null,i=g(m(e)).deep_link_id;return(i?g(m(i)).link:null)||i||n||t||e}(e);try{return new Oa(t)}catch(e){return null}}}class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,t){return ka._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Oa.parseLink(t);return Oo(n,"argument-error"),ka._fromEmailAndCode(e,n.code,n.tenantId)}}Pa.PROVIDER_ID="password",Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Da{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Na extends Da{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class La extends Na{constructor(){super("facebook.com")}static credential(e){return Ca._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return La.credential(e.oauthAccessToken)}catch(e){return null}}}La.FACEBOOK_SIGN_IN_METHOD="facebook.com",La.PROVIDER_ID="facebook.com";class Ma extends Na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ca._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ma.credential(t,n)}catch(e){return null}}}Ma.GOOGLE_SIGN_IN_METHOD="google.com",Ma.PROVIDER_ID="google.com";class Ua extends Na{constructor(){super("github.com")}static credential(e){return Ca._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ua.credential(e.oauthAccessToken)}catch(e){return null}}}Ua.GITHUB_SIGN_IN_METHOD="github.com",Ua.PROVIDER_ID="github.com";class xa extends Na{constructor(){super("twitter.com")}static credential(e,t){return Ca._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return xa.credential(t,n)}catch(e){return null}}}xa.TWITTER_SIGN_IN_METHOD="twitter.com",xa.PROVIDER_ID="twitter.com";class Fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await ra._fromIdTokenResponse(e,n,i),s=ja(n);return new Fa({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ja(n);return new Fa({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ja(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ba extends c{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ba.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Ba(e,t,n,i)}}function Ha(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ba._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const Va="__sak";class $a{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Va,"1"),this.storage.removeItem(Va),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class za extends $a{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=s();return ua(e)||va(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ya(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);!function(){const e=s();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||r===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}za.type="LOCAL";const qa=za;class Ka extends $a{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ka.type="SESSION";const Wa=Ka;class Ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ga(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xa(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ga.receivers=[];class Ja{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const h=Xa("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===h)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ya(){return window}function Qa(){return void 0!==Ya().WorkerGlobalScope&&"function"==typeof Ya().importScripts}const Za="firebaseLocalStorageDb",eh="firebaseLocalStorage",th="fbase_key";class nh{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ih(e,t){return e.transaction([eh],t?"readwrite":"readonly").objectStore(eh)}function rh(){const e=indexedDB.open(Za,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(eh,{keyPath:th})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(eh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Za);return new nh(e).toPromise()}(),t(await rh()))}))}))}async function sh(e,t,n){const i=ih(e,!0).put({[th]:t,value:n});return new nh(i).toPromise()}function oh(e,t){const n=ih(e,!0).delete(t);return new nh(n).toPromise()}class ah{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await rh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ga._getInstance(Qa()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ja(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rh();return await sh(e,Va,"1"),await oh(e,Va),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>sh(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ih(e,!1).get(t),i=await new nh(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>oh(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ih(e,!1).getAll();return new nh(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ah.type="LOCAL";const hh=ah;function ch(e){return`__${e}${Math.floor(1e6*Math.random())}`}ch("rcb"),new xo(3e4,6e4);class lh{constructor(e){this.providerId=lh.PROVIDER_ID,this.auth=Ia(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(Oo("string"==typeof r,e,"argument-error"),Oo("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Oo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return $o(e,"POST","/v2/accounts/mfaEnrollment:start",Vo(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Oo("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Oo(n,e,"missing-multi-factor-info");const o=await function(e,t){return $o(e,"POST","/v2/accounts/mfaSignIn:start",Vo(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return $o(e,"POST","/v1/accounts:sendVerificationCode",Vo(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,b(t))}static credential(e,t){return Aa._fromVerification(e,t)}static credentialFromResult(e){const t=e;return lh.credentialFromTaggedObject(t)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Aa._fromTokenResponse(t,n):null}}lh.PROVIDER_ID="phone",lh.PHONE_SIGN_IN_METHOD="phone";class uh extends Ea{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dh(e){return async function(e,t,n=!1){const i="signIn",r=await Ha(e,i,t),s=await Fa._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new uh(e),e.bypassAuthState)}function fh(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),async function(e,t,n=!1){var i;const{auth:r}=e,s="reauthenticate";try{const i=await Qo(e,Ha(r,s,t,e),n);Oo(i.idToken,r,"internal-error");const o=Yo(i.idToken);Oo(o,r,"internal-error");const{sub:a}=o;return Oo(e.uid===a,r,"user-mismatch"),Fa._forOperation(e,s,i)}catch(e){throw"auth/user-not-found"===(null===(i=e)||void 0===i?void 0:i.code)&&Co(r,"user-mismatch"),e}}(n,new uh(e),e.bypassAuthState)}async function ph(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),async function(e,t,n=!1){const i=await Qo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fa._forOperation(e,"link",i)}(n,new uh(e),e.bypassAuthState)}class gh{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dh;case"linkViaPopup":case"linkViaRedirect":return ph;case"reauthViaPopup":case"reauthViaRedirect":return fh;default:Co(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mh=new xo(2e3,1e4);class vh extends gh{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,vh.currentPopupAction&&vh.currentPopupAction.cancel(),vh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oo(e,this.auth,"internal-error"),e}async onExecution(){Do(1===this.filter.length,"Popup operations only handle one event");const e=Xa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ro(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ro(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,mh.get())};e()}}vh.currentPopupAction=null;const yh=new Map;class wh extends gh{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return aa("pendingRedirect",e.config.apiKey,e.name)}(t),i=function(e){return Lo(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function bh(e,t){yh.set(e._key(),t)}async function _h(e,t,n=!1){const i=Ia(e),r=function(e,t){return t?Lo(t):(Oo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new wh(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Ih{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Eh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Eh(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ro(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Th(e))}saveEventToCache(e){this.cachedEventUids.add(Th(e)),this.lastProcessedEventTime=Date.now()}}function Th(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Eh({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const kh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sh=/^https?/;function Ch(e){const t=Mo(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Sh.test(n))return!1;if(kh.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Rh=new xo(3e4,6e4);function Ah(){const e=Ya().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Oh=null;function Ph(e){return Oh=Oh||function(e){return new Promise(((t,n)=>{var i,r,s,o;function a(){Ah(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ah(),n(Ro(e,"network-request-failed"))},timeout:Rh.get()})}if(null===(r=null===(i=Ya().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ya().gapi)||void 0===s?void 0:s.load)){const t=ch("iframefcb");return Ya()[t]=()=>{gapi.load?a():n(Ro(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=Ro("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw Oh=null,e}))}(e),Oh}const Dh=new xo(5e3,15e3),Nh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mh(e){const t=e.config;Oo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Fo(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:he},r=Lh.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${p(i).slice(1)}`}const Uh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Fh(e,t,n,i,r,s){Oo(e.config.authDomain,e,"auth-domain-config-required"),Oo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:he,eventId:r};if(t instanceof Da){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Na){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Fo(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${p(a).slice(1)}`}const jh="webStorageSupport",Bh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wa,this._completeRedirectFn=_h,this._overrideRedirectResult=bh}async _openPopup(e,t,n,i){var r;return Do(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const c=Object.assign(Object.assign({},Uh),{width:i.toString(),height:r.toString(),top:o,left:a}),l=s().toLowerCase();n&&(h=da(l)?"_blank":n),la(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=s()){var t;return va(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==h)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",h),new xh(null);const d=window.open(t||"",h,u);Oo(d,e,"popup-blocked");try{d.focus()}catch(e){}return new xh(d)}(e,Fh(e,t,n,Mo(),i),Xa())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=Fh(e,t,n,Mo(),i),Ya().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Do(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Ph(e),n=Ya().gapi;return Oo(n,e,"internal-error"),t.open({where:document.body,url:Mh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nh,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Ro(e,"network-request-failed"),s=Ya().setTimeout((()=>{i(r)}),Dh.get());function o(){Ya().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new Ih(e);return t.register("authEvent",(t=>(Oo(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jh,{type:jh},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),Co(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return $o(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Ch(e))return}catch(e){}Co(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ya()||ua()||va()}};var Hh,Vh="@firebase/auth",$h="0.20.5";class zh{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Hh="Browser",re(new _("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((e,n)=>{Oo(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),Oo(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const i={apiKey:r,authDomain:s,clientPlatform:Hh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wa(Hh)},o=new _a(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Lo);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),re(new _("auth-internal",(e=>(e=>new zh(e))(Ia(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),le(Vh,$h,void 0),le(Vh,$h,"esm2017");const qh="firebasestorage.googleapis.com";class Kh extends c{constructor(e,t){super(Wh(e),`Firebase Storage: ${t} (${Wh(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kh.prototype)}_codeEquals(e){return Wh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function Wh(e){return"storage/"+e}function Gh(e){return new Kh("invalid-argument",e)}function Xh(){return new Kh("app-deleted","The Firebase app was deleted.")}class Jh{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Jh.makeFromUrl(e,t)}catch(t){return new Jh(e,"")}if(""===n.path)return n;throw new Kh("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===qh?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const i=a[t],r=i.regex.exec(e);if(r){const e=r[i.indices.bucket];let t=r[i.indices.path];t||(t=""),n=new Jh(e,t),i.postModify(n);break}}if(null==n)throw function(e){return new Kh("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class Yh{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Qh(e,t,n,i){if(i<t)throw Gh(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Gh(`Invalid value for '${e}'. Expected ${n} or less.`)}var Zh,ec;(ec=Zh||(Zh={}))[ec.NO_ERROR=0]="NO_ERROR",ec[ec.NETWORK_ERROR=1]="NETWORK_ERROR",ec[ec.ABORT=2]="ABORT";class tc{constructor(e,t,n,i,r,s,o,a,h,c,l){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=h,this.progressCallback_=c,this.connectionFactory_=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(e){i(e)}else if(null!==r){const e=new Kh("unknown","An unknown error occurred, please check the error payload for server response.");e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else t.canceled?i(this.appDelete_?Xh():new Kh("canceled","User canceled the upload/download.")):i(new Kh("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new nc(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function h(){return 2===a}let c=!1;function l(...e){c||(c=!0,t.apply(null,e))}function u(t){r=setTimeout((()=>{r=null,e(f,h())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(c)return void d();if(e)return d(),void l.call(null,e,...t);if(h()||o)return d(),void l.call(null,e,...t);let n;i<64&&(i*=2),1===a?(a=2,n=0):n=1e3*(i+Math.random()),u(n)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==r?(e||(a=2),clearTimeout(r),u(0)):e||(a=1)))}return u(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(((e,t)=>{if(t)return void e(!1,new nc(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Zh.NO_ERROR,r=n.getStatus();if(!t||this.isRetryStatusCode_(r)){const t=n.getErrorCode()===Zh.ABORT;return void e(!1,new nc(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new nc(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||i}}class nc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}class ic{constructor(e,t){this._service=e,this._location=t instanceof Jh?t:Jh.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ic(e,t)}get root(){const e=new Jh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Jh(this._location.bucket,e);return new ic(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Kh("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function rc(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:Jh.makeFromBucketSpec(n,e)}class sc{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=qh,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Jh.makeFromBucketSpec(i,this._host):rc(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Jh.makeFromBucketSpec(this._url,e):this._bucket=rc(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ic(this,e)}_makeRequest(e,t,n,i){if(this._deleted)return new Yh(Xh());{const r=function(e,t,n,i,r,s){const o=function(e){const t=encodeURIComponent;let n="?";for(const i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n=n.slice(0,-1),n}(e.urlParams),a=e.url+o,h=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(h,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(h,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(h,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(h,i),new tc(a,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,n,i,t,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const oc="@firebase/storage",ac="0.9.9",hc="storage";var cc,lc;re(new _(hc,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new sc(n,i,r,t,he)}),"PUBLIC").setMultipleInstances(!0)),le(oc,ac,""),le(oc,ac,"esm2017");const uc={apiKey:"AIzaSyBvd9S50ayvisTxaVQR4c7tjkEBN3rdO3Q",authDomain:"underground-eve.firebaseapp.com",projectId:"underground-eve",storageBucket:"underground-eve.appspot.com",messagingSenderId:"1041403011395",appId:"1:1041403011395:web:d1a08391beef5a0bfdcff6",measurementId:"G-W4HDN06V2R"};(function(e=ce()){se(e,"firestore").getImmediate()})(cc=function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw oe.create("bad-app-name",{appName:String(i)});const r=te.get(i);if(r){if(d(e,r.options)&&d(n,r.config))return r;throw oe.create("duplicate-app",{appName:i})}const s=new E(i);for(const e of ne.values())s.addComponent(e);const o=new ae(e,n,s);return te.set(i,o),o}(uc)),lc=function(e=ce()){const t=se(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=se(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(d(n.getOptions(),null!=t?t:{}))return e;Co(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Bh,persistence:[hh,qa,Wa]})}(cc),function(e=ce(),t){se(e=b(e),hc).getImmediate({identifier:t})}(cc),function(e=ce()){const t=se(e=b(e),et);t.isInitialized()?t.getImmediate():function(e,t={}){const n=se(e,et);if(n.isInitialized()){const e=n.getImmediate();if(d(t,n.getOptions()))return e;throw rt.create("already-initialized")}n.initialize({options:t})}(e)}(cc),function(){let e=JSON.parse(localStorage.getItem("we_user"));e||async function(e){var t;const n=Ia(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Fa({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await async function(e,t){return qo(e,"POST","/v1/accounts:signUp",Vo(e,t))}(n,{returnSecureToken:!0}),r=await Fa._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}(lc).then((async e=>{let t=await JSON.stringify(e),n=await JSON.stringify(uc);await localStorage.setItem("we_user",t),await localStorage.setItem("we_config",n)})).catch((e=>!1))}(),setTimeout((async()=>{await async function(){}()}),2e3)})();